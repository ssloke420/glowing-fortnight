<!DOCTYPE html>
<html ng-app="glow">
<head>
    <title>Glowing Fortnight</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <style>
        body {
            color: darkorange;
            font-family: monospace;
            text-decoration: double;
            text-align: center;
            background-image: linear-gradient(brown, maroon, red);
        }
    </style>
</head>
<body ng-controller="GlowingController">
<h1 style="font-size: 50pt;">Glowing Fortnight</h1>
<h1>Current time: {{datetime.time}}</h1>
<h1>Current date: {{datetime.date}}</h1>
<h1 id="user"></h1>
<input id="usernameInput" placeholder="Enter your username."/>
<div id="ww_3d24325e41c21" v='1.3' loc='id' a='{"t":"horizontal","lang":"en","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"fahrenheit","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722"}'>More forecasts: <a href="https://oneweather.org/fr/paris/30_jours/" id="ww_3d24325e41c21_u" target="_blank">Meteo a 30 jours</a></div><script async src="https://app2.weatherwidget.org/js/?id=ww_3d24325e41c21"></script>
<script>
    let app = angular.module('glow', []);
    app.controller('GlowingController', function($scope, $interval) {
        $scope.datetime = {time: "", date: ""}
        $scope.datetime.time = new Date().toLocaleTimeString();
        $scope.datetime.date = new Date().toLocaleDateString();
        let updateTime = function () {
            $scope.datetime.time = new Date().toLocaleTimeString();
            $scope.datetime.date = new Date().toLocaleDateString();
        }
        updateTime();
        $interval(updateTime, 1000);
    });

    let username;
    let userInput = document.getElementById("usernameInput");
    userInput.addEventListener("keydown", function(e){
        if (e.key == "Enter") {
            let inputUsername = userInput.value.trim();
            if (inputUsername !== "") {
                let confirmation = confirm("Are you sure you would like to save this username?");
                if (confirmation) {
                    document.cookie = `username=${inputUsername}; expires=Thu, 18 Dec 2024 12:00:00 UTC; path=/;`;
                    username = inputUsername;
                    document.getElementById("user").innerHTML = "User: " + username;
                    userInput.style.display = "none";
                }
            } else {
                alert("Please enter a username.");
            }
        }
    });

    function checkCookies() {
        let cookies = document.cookie.split(';');
        let usernameExists = false;
        for (let i = 0; i < cookies.length; i++) {
            let cookie = cookies[i].trim();
            if (cookie.startsWith("username=")) {
                usernameExists = true;
                username = cookie.substring("username=".length);
                document.getElementById("user").innerHTML = "User: " + username;
                userInput.style.display = "none";
                break;
            }
        }
    }

    // Call checkCookies after the DOM has been fully loaded
    window.addEventListener("load", checkCookies);
</script>
</body>
</html>
